{"version":3,"file":"index.js","sources":["webpack://vue-drag-slider/webpack/universalModuleDefinition","webpack://vue-drag-slider/./src/drag-slider/range/slider.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-drag-slider\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-drag-slider\"] = factory();\n\telse\n\t\troot[\"vue-drag-slider\"] = factory();\n})(window, function() {\nreturn ","/*!\n * ==========================================================\n *  RANGE SLIDER 2.0.1\n * ==========================================================\n * Author: Taufik Nurrohman <https://github.com/tovic>\n * License: MIT\n * ----------------------------------------------------------\n */\n\nfunction RS(target, event, vertical, options) {\n  event = event || {}\n\n  var ranger = options.ranger\n  var dragger = options.dragger\n  var exceptClasses = options.exceptClasses\n\n  var win = window\n  var doc = document\n  // var ranger = doc.createElement('div')\n  // var dragger = doc.createElement('span')\n  var drag = false\n  var rangerSize = 0\n  var draggerSize = 0\n  var rangerDistance = 0\n  var cacheValue = 0\n  var size = vertical ? 'offsetHeight' : 'offsetWidth'\n  var css = vertical ? 'top' : 'left'\n  var page = vertical ? 'pageY' : 'pageX'\n  var offset = vertical ? 'offsetTop' : 'offsetLeft'\n  var client = vertical ? 'clientY' : 'clientX'\n  var scroll = vertical ? 'scrollTop' : 'scrollLeft'\n  vertical = vertical || event.vertical || false\n\n  function isSet(x) {\n    return typeof x !== 'undefined'\n  }\n\n  function isFunc(x) {\n    return typeof x === 'function'\n  }\n\n  // 浏览器是否支持passive\n  // doc: https://juejin.im/post/5ad804c1f265da504547fe68\n  function passiveSupported() {\n    var passiveSupported = false\n    try {\n      var options = Object.defineProperty({}, 'passive', {\n        get: function() {\n          passiveSupported = true\n        }\n      })\n\n      if (window.addEventListener) {\n        window.addEventListener('test', null, options)\n        setTimeout(() => {\n          window.removeEventListener('test', null, options)\n        }, 0)\n      }\n    }\n    catch (err) {\n      console.warn('passiveSupported() error: ', err)\n    }\n    return passiveSupported\n  }\n\n  function getCoordinate(el) {\n    var x = el[offset]\n    while ((el = el.offsetParent)) {\n      x += el[offset]\n    }\n    return x\n  }\n\n  function on(ev, el, fn) {\n    if (el.addEventListener) {\n      var isPassiveSupported = passiveSupported()\n      // https://developers.google.com/web/updates/2016/06/passive-event-listeners?hl=zh-cn\n      el.addEventListener(ev, fn, isPassiveSupported ? { passive: false } : false)\n    }\n    else if (el.attachEvent) {\n      el.attachEvent('on' + ev, fn)\n    }\n    else {\n      el['on' + ev] = fn\n    }\n  }\n\n  function off(ev, el, fn) {\n    if (el.removeEventListener) {\n      el.removeEventListener(ev, fn)\n    }\n    else if (el.detachEvent) {\n      el.detachEvent('on' + ev, fn)\n    }\n    else {\n      el['on' + ev] = null\n    }\n  }\n\n  // https://gomakethings.com/how-to-get-the-closest-parent-element-with-a-matching-selector-using-vanilla-javascript/\n  var getClosest = function(elem, selector) {\n    // Element.matches() polyfill\n    if (!Element.prototype.matches) {\n      Element.prototype.matches = Element.prototype.matchesSelector\n        || Element.prototype.mozMatchesSelector\n        || Element.prototype.msMatchesSelector\n        || Element.prototype.oMatchesSelector\n        || Element.prototype.webkitMatchesSelector\n        || function(s) {\n          var matches = (this.document || this.ownerDocument).querySelectorAll(s)\n          var i = matches.length\n          while (--i >= 0 && matches.item(i) !== this) {\n            // nothing\n          }\n          return i > -1\n        }\n    }\n\n    // Get the closest matching element\n    for (; elem && elem !== document; elem = elem.parentNode) {\n      if (elem.matches(selector)) return elem\n    }\n    return null\n  }\n\n  // function addClass(s, el) {\n  //   if (el.classList) {\n  //     el.classList.add(s)\n  //   }\n  //   else {\n  //     el.className += ' ' + s\n  //   }\n  // }\n\n  // addClass('range-slider', target)\n  // addClass('range-slider-' + (vertical ? 'vertical' : 'horizontal'), target)\n  // addClass('range-slider-track', ranger)\n  // addClass('dragger', dragger)\n\n  // `RS(target, function(a, b, c) {})`\n  if (isFunc(event)) {\n    event = {\n      drag: event\n    }\n  }\n\n  function edge(a, b, c) {\n    if (a < b) return b\n    if (a > c) return c\n    return a\n  }\n\n  function preventDefault(e) {\n    var target = e.target\n    // console.log('target: ', target)\n    if (exceptClasses && exceptClasses.length) {\n      var flag = false\n      for (var i = 0; i < exceptClasses.length; i++) {\n        var exceptClass = exceptClasses[i]\n        var findDom = getClosest(target, '.' + exceptClass)\n        var exceptDom = document.querySelector('.' + exceptClass)\n        // console.log('findDom: ', findDom, exceptDom, exceptDom === target)\n        if (findDom\n          || (exceptDom && exceptDom === target)) {\n          flag = true\n        }\n      }\n      if (flag) {\n        return\n      }\n    }\n    // doc: https://www.chromestatus.com/features/5093566007214080\n    if (e.preventDefault) e.preventDefault()\n    return false\n  }\n\n  function setSize() {\n    rangerSize = ranger[size]\n    rangerDistance = getCoordinate(ranger)\n    draggerSize = dragger[size]\n  }\n\n  function dragInit() {\n    cacheValue = edge(isSet(event.value) ? event.value : 0, 0, 100)\n    dragger.style[css] = (cacheValue / 100) * rangerSize - draggerSize / 2 + 'px'\n    if (isFunc(event.create)) event.create(cacheValue, target)\n    if (isFunc(event.drag)) event.drag(cacheValue, target)\n  }\n\n  function dragStart(e) {\n    setSize()\n    drag = true\n    dragUpdate(e)\n    on('touchmove', doc, dragMove)\n    on('mousemove', doc, dragMove)\n    if (isFunc(event.start)) event.start(cacheValue, target, e)\n    return preventDefault(e)\n  }\n\n  function dragMove(e) {\n    dragUpdate(e)\n    return preventDefault(e)\n  }\n\n  function dragStop(e) {\n    drag = false\n    off('touchmove', doc, dragMove)\n    off('mousemove', doc, dragMove)\n    if (isFunc(event.stop)) event.stop(cacheValue, target, e)\n    return preventDefault(e)\n  }\n\n  function dragUpdate(e) {\n    e = e || win.event\n    var pos = e.touches ? e.touches[0][page] : e[page]\n    var move = edge(pos - rangerDistance, 0, rangerSize)\n    var value = edge(((pos - rangerDistance) / rangerSize) * 100, 0, 100)\n    if (!pos) pos = e[client] + doc.body[scroll] + doc.documentElement[scroll]\n    if (drag) {\n      dragger.style[css] = move - draggerSize / 2 + 'px'\n      cacheValue = Math.round(value)\n      if (isFunc(event.drag)) event.drag(cacheValue, target, e)\n    }\n  }\n\n  on('touchstart', ranger, dragStart)\n  on('mousedown', ranger, dragStart)\n\n  on('touchend', doc, dragStop)\n  on('mouseup', doc, dragStop)\n\n  on('resize', win, function(e) {\n    setSize()\n    drag = false\n    dragger.style[css] = (cacheValue / 100) * rangerSize - draggerSize / 2 + 'px'\n  })\n\n  ranger.appendChild(dragger)\n  target.appendChild(ranger)\n\n  setSize()\n  dragInit()\n\n  return target\n}\n\nexport default RS\n"],"mappings":"AAAA;;;;;;;;;ACSA","sourceRoot":""}